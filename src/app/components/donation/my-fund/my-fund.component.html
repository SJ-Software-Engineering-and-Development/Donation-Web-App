<link
  href="https://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css"
  rel="stylesheet"
/>
<!-- payhere SDK : https://support.payhere.lk/api-&-mobile-sdk/payhere-javascript -->
<!-- <script
  type="text/javascript"
  src="https://www.payhere.lk/lib/payhere.js"
></script> -->

<!-- OR Node version is available-->

<!-- Docs-->
<!-- https://support.payhere.lk/api-&-mobile-sdk/payhere-reactnative -->
<!-- Node Package : payhere-js-sdk -->
<!-- cmd          : yarn add payhere-js-sdk  (npm version not working, but yarn working)-->
<!-- Docs         : https://yarnpkg.com/package/payhere-js-sdk#readme -->

<section class="shopping-cart">
  <div class="cart-total">
    <div class="fundUser">
      <img src="{{ avatar }}" alt="" />
      <h3 style="margin-bottom: 0px">{{ user.name }}</h3>
      <h5 style="margin-top: 0%">{{ user.email }}</h5>
    </div>
    <h1 class="heading" style="margin-bottom: 1rem; margin-top: 1rem">
      <!-- {{ fund?.title }} -->
    </h1>
    <p style="text-align: center; width: align-self; margin-right: 12px">
      <!-- {{ fund?.description }} -->
    </p>
    <div class="details" style="margin-top: 3rem">
      <div class="row">
        <div class="col-sm-4">
          <div class="card app-card">
            <div class="card-body">
              <h5
                style="font-size: medium; font-weight: bold"
                class="card-title"
              >
                <i class="fas fa-hand-holding-usd mr-2" style="color: seagreen;"></i> My Active Funds
              </h5>
              <p style="font-size: 35px; margin-top: 30px; ">{{myActiveFundCount}}</p>
              <p class="card-text">
                <!-- {{ fund.category?.name }} <br />
                {{ fund.category?.description }} -->
              </p>
            </div>
          </div>
        </div>
        <div class="col-sm-4">
          <div class="card app-card">
            <div class="card-body">
              <h5
                style="font-size: medium; font-weight: bold"
                class="card-title"
              >
                <i class="fas fa-history mr-2" style="color: sandybrown;"></i> My pending Funds
              </h5>
              <p style="font-size: 35px; margin-top: 30px;">{{pendingCount}}</p>
              <p class="card-text">
                <!-- {{ daysLeft }} -->
              </p>
              <p class="card-text">
                <!-- {{ fund.userProfile?.fullName }} expect to complete this fund at
                {{ fund?.targetDate }} -->
              </p>
            </div>
          </div>
        </div>
        <div class="col-sm-4">
          <div class="card app-card">
            <div class="card-body">
              <div>
                <h5
                  style="font-size: medium; font-weight: bold"
                  class="card-title"
                >
                  <i class="fas fa-times mr-2 " style="color: red;"></i>My Cancled Funds
                </h5>
                <p style="font-size: 35px; margin-top: 30px;">{{cancleCount}}</p>
                <!-- <p class="card-text text-info">Rs. {{ fund.targetAmount }}</p> -->
              </div>
             
            </div>
          </div>
        </div>
      </div>

      <div class="details" style="margin-top: 3rem">
        <div class="row">
              <div class="col-sm-2">
                <div class="card app-card">
                  <div class="card-body">
                    <div class="text-center">
                        
                            <!-- <i class="fas fa-users mr-2 fa-5x" style="color: red;"></i> -->
                            <span style="font-size: 60px; color: rgb(27, 134, 177);">
                                <i class="fas fa-plus" data-toggle="modal" data-target="#exampleModal"></i>
                            </span>
                        
                      <h5
                        style="font-size: medium; font-weight: bold"
                        class="card-title mt-2"
                      >
                        Add New
                      </h5>
                    </div>
                   
                  </div>
                </div>
              </div>
        </div> 
    </div>

      <div class="row mt-4">
        <div class="col-sm-12">
          <div class="card">
            <div class="card-header text-center"><b>My Funds</b></div>
            <div class="card-body">
              <div class="row">
                <table class="table table-striped">
                  <thead>
                    <tr>
                      <th scope="col">Title</th>
                      <th scope="col">Status</th>
                      <th scope="col">Target Amount</th>
                      <th scope="col">Target Date</th>
                      <th scope="col">Description</th>
                    
                    </tr>
                  </thead>
                  <tbody>
                    <tr
                      *ngFor="
                        let item of funds
                          | paginate
                            : {
                                itemsPerPage: tableSize,
                                currentPage: page,
                                totalItems: count
                              }
                      "
                    >
                      <!-- <th scope="row">1</th> -->
                      <td>{{ item.title }}</td>
                      <ng-container [ngSwitch]="item.status">
                        <!-- the same view can be shown in more than one case -->
                        <td *ngSwitchCase="'active'" class="text-info">
                          {{ item.status }}
                        </td>
                        <td *ngSwitchCase="'pending'" class="text-warning">
                          {{ item.status }}
                        </td>

                        <!--default case when there are no matches -->
                        <td *ngSwitchDefault>...</td>
                      </ng-container>
                      <td>{{ item.targetAmount }}</td>
                      <td>{{ item.targetDate }}</td>
                      <td>{{ item.description | slice: 0:20 }} ...</td>
                      <td><span style="font-size: 20px; color: rgb(33, 12, 219);" class="ml-2">
                        <i class="fas fa-eye" (click) = "details(item.id)"></i>
                    </span></td>
                    </tr>
                  </tbody>
                  <br />
                  <pagination-controls
                    previousLabel="Prev"
                    nextLabel="Next"
                    (pageChange)="onTableDataChange($event)"
                  >
                  </pagination-controls>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <section class="arrivals">
    <h1 class="heading">Active <span>Funds</span></h1>
    <h2 *ngIf = "myActiveFundCount == 0" class="heading">No Active Funds yet</h2>
    <div class="box-container" style="margin-top: 60px">
      <div class="box" *ngFor="let fund of activeFunds">
        <i class="fas fa-times"></i>
        <img src="images/product-1.jpg" alt="" />
        <div class="content">
          <h3 class="text-info">
            <b>{{ fund.title }}</b>
          </h3>
          <span>Target : </span>
          <span class="badge bg-success" style="color: aliceblue">{{
            getTarget(fund.totalDonationAmount, fund.targetAmount)
          }}</span>
          <h3 class="mt-3">Target Amount: Rs. {{ fund.targetAmount }}</h3>
          <h3>Donations: Rs. {{ fund.totalDonationAmount }}</h3>
          <h3>Donations count: {{ fund.totalDonations }}</h3>
        </div>
      </div>
    </div>
  </section>
</section>
 
<!-- fund add Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel"></h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="card">
          <div class="card-header text-center">Add Fund</div>
          <div class="card-body" style="font-size: medium">
            <form [formGroup]="create_donationForm">
              
              <div class="form-group">
                <label for="exampleInputPassword1">Title</label>
                <input type="text" class="form-control" id="" placeholder="Title" formControlName="title">
              </div>
              <div class="form-group">
                <label for="exampleInputPassword1">Target Amount</label>
                <input type="text" class="form-control" id="" placeholder="Target Amount" formControlName="targetAmout">
              </div>
              <div class="form-group">
                <label for="exampleInputPassword1">target Date</label>
                <input type="date" class="form-control" id="" placeholder="target Date" formControlName="targetDate">
              </div>
              <div class="form-group">
                <label for="exampleInputPassword1">Categary</label>
                <input type="text" class="form-control" id="" placeholder="Categary" formControlName="category">
              </div>
              <div class="form-group">
                <label for="exampleInputPassword1">Description</label>
                <input type="text" class="form-control" id="" placeholder="Description" formControlName="description">
              </div>
    
              
            <div class="modal-footer">
              <button type="button"  class="btn btn-secondary" data-dismiss="modal">Close</button>
              <button type="button" (click)= "submit()" class="btn btn-primary" data-dismiss="modal">Add</button>
            </div>
          </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>